<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录技术学习以及读书心得"><meta name="keywords" content="study"><title>nodejs学习之路01-异步调用与net fs核心类库 | 学习之路</title><link rel="stylesheet" type="text/css" href="//fonts.neworld.org/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">nodejs学习之路01-异步调用与net fs核心类库</h1><a id="logo" href="/.">学习之路</a><p class="description">做只笨鸟</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">nodejs学习之路01-异步调用与net fs核心类库</h1><div class="post-meta"><a href="/2018/05/01/2018-05-01-nodejs学习之路01/#comments" class="comment-count"></a><p><span class="date">May 01, 2018</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><h1 id="nodejs学习之路01"><a href="#nodejs学习之路01" class="headerlink" title="nodejs学习之路01"></a>nodejs学习之路01</h1><p>本文github地址 <a href="https://github.com/dumingcode/nodejs-demo.git" title="github地址" target="_blank" rel="noopener">https://github.com/dumingcode/nodejs-demo.git</a></p>
<h2 id="异步调用实例"><a href="#异步调用实例" class="headerlink" title="异步调用实例"></a>异步调用实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;Hello&quot;);</span><br><span class="line">setTimeout(() =&gt; &#123; console.log(&quot;World&quot;) &#125;, 5000)</span><br><span class="line">console.log(&quot;非阻塞&quot;);</span><br><span class="line"></span><br><span class="line">output:</span><br><span class="line">node src\demo01.js </span><br><span class="line">Hello</span><br><span class="line">非阻塞</span><br><span class="line">World</span><br></pre></td></tr></table></figure>
<p>如上例所示setTimeOut是非阻塞的，程序没有等待而是直接执行了打印<code>非阻塞</code>信息，nodejs一切调用都是异步的。   </p>
<h2 id="单线程"><a href="#单线程" class="headerlink" title="单线程"></a>单线程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**单线程示例 */</span><br><span class="line">let start = new Date()</span><br><span class="line">console.log(start)</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(Date.now() - start.getTime())</span><br><span class="line">    for (let i = 0; i &lt; 100000000000; i++) &#123;&#125;</span><br><span class="line">&#125;, 1000)</span><br><span class="line"></span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(Date.now() - start.getTime())</span><br><span class="line">&#125;, 2000)</span><br><span class="line"></span><br><span class="line">output:</span><br><span class="line">node src\singleThread.js </span><br><span class="line">2018-04-30T07:03:54.402Z</span><br><span class="line">1009</span><br><span class="line">160788</span><br></pre></td></tr></table></figure>
<p>可以看到第二个setTimeOut的执行时间为160788秒，这是一个非常大的数字。</p>
<p>Node.js 在主线程里维护了一个事件队列，当接到请求后，就将该请求作为一个事件放入这个队列中，然后继续接收其他请求。当主线程空闲时(没有请求接入时)，就开始循环事件队列，检查队列中是否有要处理的事件，这时要分两种情况：</p>
<ul>
<li>如果是非 I/O 任务，就亲自处理，并通过回调函数返回到上层调用；</li>
<li>如果是 I/O 任务，就从 线程池 中拿出一个线程来处理这个事件，并指定回调函数，然后继续循环队列中的其他事件<br>上述代码就是因为是非IO任务，所以耗费了主进程计算时间，使主进程无法执行事件循环，所以nodejs不适合执行CPU计算密集型任务。<h3 id="单线程总结"><a href="#单线程总结" class="headerlink" title="单线程总结"></a>单线程总结</h3><img src="https://github.com/i5ting/How-to-learn-node-correctly/raw/master/media/14912707129964/14992384974942.png" alt="image"></li>
<li>nodejs单线程是针对图中的Event  Loop，事件循环运行在主线程中。换言之nodejs接收任务请求是单线程的。</li>
<li>nodejs在具体执行IO任务的时候是多线程方式，在Async I/O队列中执行。   </li>
</ul>
<h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&quot;http&quot;)</span><br><span class="line"></span><br><span class="line">http.createServer(() =&gt; &#123;</span><br><span class="line">    throw new Error(&quot;错误不会被捕获&quot;)</span><br><span class="line"></span><br><span class="line">&#125;).listen(3000)</span><br><span class="line"></span><br><span class="line">输出如下：</span><br><span class="line">node src\err.js </span><br><span class="line">d:\Workspaces\nodejs-demo\src\err.js:4</span><br><span class="line">    throw new Error(&quot;错误不会被捕获&quot;)</span><br><span class="line">    ^</span><br><span class="line"></span><br><span class="line">Error: 错误不会被捕获</span><br><span class="line">    at Server.http.createServer (d:\Workspaces\nodejs-demo\src\err.js:4:11)</span><br><span class="line">    at emitTwo (events.js:126:13)</span><br><span class="line">    at Server.emit (events.js:214:7)</span><br><span class="line">    at parserOnIncoming (_http_server.js:602:12)</span><br><span class="line">    at HTTPParser.parserOnHeadersComplete (_http_common.js:116:23)</span><br></pre></td></tr></table></figure>
<p>nodejs在发生未被捕获的进程后，进程的状态就不确定了，无法正常工作。下一步添加uncaughtException函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var http = require(&quot;http&quot;)</span><br><span class="line"></span><br><span class="line">http.createServer(() =&gt; &#123;</span><br><span class="line">    throw new Error(&quot;错误不会被捕获&quot;)</span><br><span class="line"></span><br><span class="line">&#125;).listen(3000)</span><br><span class="line"></span><br><span class="line">process.on(&apos;uncaughtException&apos;, (err) =&gt; &#123;</span><br><span class="line">    console.log(err)</span><br><span class="line">    process.exit(1)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>绝大多数异步API回调函数的第一个参数都是err对象或者null。   </p>
<h2 id="Node中的js"><a href="#Node中的js" class="headerlink" title="Node中的js"></a>Node中的js</h2><p>下面主要介绍一些nodejs的核心类库。</p>
<h3 id="global"><a href="#global" class="headerlink" title="global"></a>global</h3><p>任何global上的属性都可以被全局访问到。</p>
<h3 id="process"><a href="#process" class="headerlink" title="process"></a>process</h3><p>所有全局执行的上下文都在process中。</p>
<h2 id="nodejs模块"><a href="#nodejs模块" class="headerlink" title="nodejs模块"></a>nodejs模块</h2><p>模块系统有三个全局的变量，require、module、exports。</p>
<h3 id="绝对模块和相对模块"><a href="#绝对模块和相对模块" class="headerlink" title="绝对模块和相对模块"></a>绝对模块和相对模块</h3><p>绝对模块指node在node_modules内部查找的模块，或者node内置的比如fs这样的模块。相对模块是require指向工作目录中的js文件。相对模块引用示例<code>require &#39;./moduleA&#39;</code>。</p>
<h3 id="暴露API"><a href="#暴露API" class="headerlink" title="暴露API"></a>暴露API</h3><p>要让模块暴露一个API成为require调用的返回值，需要依靠module和require的返回值。<br>moduleA.js:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">exports.name = &apos;John&apos;</span><br><span class="line">exports.data = &apos;This is module demo&apos;</span><br><span class="line">let privateData = 5</span><br><span class="line">exports.getPriData = () =&gt; &#123;</span><br><span class="line">    return privateData</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>moduleDemo.js代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var moduleA = require(&apos;./module_a&apos;)</span><br><span class="line">console.log(moduleA.data)</span><br><span class="line">console.log(moduleA.name)</span><br><span class="line">console.log(moduleA.getPriData())</span><br></pre></td></tr></table></figure></p>
<h2 id="Nodejs重要API"><a href="#Nodejs重要API" class="headerlink" title="Nodejs重要API"></a>Nodejs重要API</h2><p>本部分通过定义一个需求来实现：   </p>
<ul>
<li>程序启动后，需要显示当前目录下的文件列表。</li>
<li>选择某个文件后，程序需要显示文件内容。</li>
<li>选择一个目录时，程序需要显示当前目录下的内容。</li>
<li>运行结束后程序退出。<br>程序设计：</li>
</ul>
<ol>
<li>创建模块</li>
<li>决定使用同步fs还是异步fs</li>
<li>理解什么是流</li>
<li>实现输入输出</li>
<li>重构</li>
<li>使用fs进行文件交互</li>
<li>完成<h3 id="创建模块"><a href="#创建模块" class="headerlink" title="创建模块"></a>创建模块</h3>创建名为 file-explorer的项目目录，创建一个简单的package.json文件。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;file-explorer&quot;,</span><br><span class="line">    &quot;version&quot;: &quot;0.01&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;a command file-explorer&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="同步还是异步"><a href="#同步还是异步" class="headerlink" title="同步还是异步"></a>同步还是异步</h3><p>需要首先引入fs，fs模块是nodejs中唯一既提供同步又提供异步方法的API，为了体现nodejs异步的特性，决定使用异步方式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">fs.readdir(__dirname, (err, files) =&gt; &#123;</span><br><span class="line">    console.log(files)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>示例代码V1版本如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">fs.readdir(__dirname, (err, files) =&gt; &#123;</span><br><span class="line">    console.log(&apos;&apos;)</span><br><span class="line">    if (!files.length) &#123;</span><br><span class="line">        return console.log(&quot;no file!&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(&quot;select which dir or file you want to see\n&quot;)</span><br><span class="line">    let filefunc = (i) =&gt; &#123;</span><br><span class="line">        let filename = files[i]</span><br><span class="line">            //if (filename.startsWith(&quot;.&quot;)) return</span><br><span class="line">        fs.stat(__dirname + &apos;/&apos; + filename, (err, stats) =&gt; &#123;</span><br><span class="line">            if (stats.isDirectory()) &#123;</span><br><span class="line">                console.log(`dir is ` + filename)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                console.log(`file is ` + filename)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        i++</span><br><span class="line">        if (i == files.length) &#123;</span><br><span class="line">            console.log(&apos;&apos;)</span><br><span class="line">            process.stdout.write(&apos;Enter your choice\n&apos;)</span><br><span class="line">            process.stdin.resume()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            filefunc(i)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    filefunc(0)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>本章示例，基于TCP的聊天程序：</p>
<ol>
<li>成功连接到server后会返回欢迎消息，server要求client输入用户名，并告知当前有多少用户方位</li>
<li>输入用户名，按下回车键人为链接成功</li>
<li>链接成功后，可以向其他用户输入消息<br>V1版本如下:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var net = require(&apos;net&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var server = net.createServer((c =&gt; &#123;</span><br><span class="line">    console.log(`new client $&#123;c.localAddress&#125;`)</span><br><span class="line">    c.on(&apos;end&apos;, () =&gt; &#123;</span><br><span class="line">        console.log(&apos;client disconnected&apos;);</span><br><span class="line">    &#125;);</span><br><span class="line">    c.write(&apos;hello\r\n&apos;);</span><br><span class="line">    c.pipe(c);</span><br><span class="line">&#125;))</span><br><span class="line">server.listen(3000, () =&gt; &#123;</span><br><span class="line">    console.log(&apos;server bound&apos;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.on(&apos;error&apos;, (err) =&gt; &#123;</span><br><span class="line">    throw err;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="聊天程序优化"><a href="#聊天程序优化" class="headerlink" title="聊天程序优化"></a>聊天程序优化</h3><ol>
<li>增加当前已连接客户计数器</li>
<li>当有新客户输入昵称时，判断当前是否有重名用户，若无重名用户，则将新客户的信息通知到其余客户。</li>
<li>当有客户退出时，清除存储结构，并通知其他客户。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">var net = require(&apos;net&apos;)</span><br><span class="line"></span><br><span class="line">var conCount = 0,</span><br><span class="line">    users = &#123;&#125;</span><br><span class="line"></span><br><span class="line">var server = net.createServer((c =&gt; &#123;</span><br><span class="line">    var nickname</span><br><span class="line">    console.log(`new client $&#123;c.localAddress&#125;`)</span><br><span class="line">    c.setDefaultEncoding(&apos;utf8&apos;)</span><br><span class="line">    c.write(&apos;hello\r\n&apos;);</span><br><span class="line"></span><br><span class="line">    c.write(`$&#123;++conCount&#125; guests\r\n please write your name\r\n`)</span><br><span class="line">    c.pipe(c);</span><br><span class="line">    c.on(&apos;close&apos;, () =&gt; &#123;</span><br><span class="line">        console.log(&apos;client disconnected&apos;);</span><br><span class="line">        conCount--</span><br><span class="line">        delete users[nickname]</span><br><span class="line">        for (key in users) &#123;</span><br><span class="line">            users[key].write(`$&#123;nickname&#125; left out game!\r\n当前用户数目$&#123;conCount&#125;\r\n`)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    c.on(&apos;data&apos;, (data) =&gt; &#123;</span><br><span class="line">        let buf = data.toString(&apos;utf8&apos;).replace(&apos;\r\n&apos;, &apos;&apos;)</span><br><span class="line">        if (buf == &apos;&apos;) return</span><br><span class="line">        if (!nickname) &#123;</span><br><span class="line">            if (users[buf]) &#123;</span><br><span class="line">                c.write(`$&#123;nickname&#125; is used,please input again \r\n`)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                nickname = buf</span><br><span class="line">                users[nickname] = c</span><br><span class="line">                for (key in users) &#123;</span><br><span class="line">                    users[key].write(`$&#123;nickname&#125; has joined our game\r\n`)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;))</span><br><span class="line">server.listen(3000, () =&gt; &#123;</span><br><span class="line">    console.log(&apos;server bound&apos;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.on(&apos;error&apos;, (err) =&gt; &#123;</span><br><span class="line">    throw err;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>users 对象存储每一个用户的链接，在每一个链接内增加<code>nickname</code>属性。上述代码，所有的链接共享当前链接数和user对象，任何一个链接改了这两个变量，都会对其他的链接产生影响。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://github.com/i5ting/How-to-learn-node-correctly" target="_blank" rel="noopener">i5ting大神</a><br>《了不起的nodejs》</p>
</div><div class="tags"><a href="/tags/nodejs/">nodejs</a></div><div class="post-share"><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="more" class="bds_more"></a><a href="#" data-cmd="mshare" title="分享到一键分享" class="bds_mshare"></a><a href="#" data-cmd="fbook" title="分享到Facebook" class="bds_fbook"></a><a href="#" data-cmd="twi" title="分享到Twitter" class="bds_twi"></a><a href="#" data-cmd="linkedin" title="分享到linkedin" class="bds_linkedin"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a></div></div><div class="post-nav"><a href="/2018/05/02/2018-05-02-ES6学习之路04/" class="pre">ES6学习之路04</a><a href="/2018/04/30/2018-04-30-docker学习笔记03/" class="next">docker学习笔记03-Dockerfile指令详解</a></div><div id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zNTcyNC8xMjI2MA"></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#nodejs学习之路01"><span class="toc-text">nodejs学习之路01</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#异步调用实例"><span class="toc-text">异步调用实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单线程"><span class="toc-text">单线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单线程总结"><span class="toc-text">单线程总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#错误处理"><span class="toc-text">错误处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Node中的js"><span class="toc-text">Node中的js</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#global"><span class="toc-text">global</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#process"><span class="toc-text">process</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nodejs模块"><span class="toc-text">nodejs模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#绝对模块和相对模块"><span class="toc-text">绝对模块和相对模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#暴露API"><span class="toc-text">暴露API</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nodejs重要API"><span class="toc-text">Nodejs重要API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建模块"><span class="toc-text">创建模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#同步还是异步"><span class="toc-text">同步还是异步</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP"><span class="toc-text">TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#聊天程序优化"><span class="toc-text">聊天程序优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-text">参考链接</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/05/06/2018-05-06-nodejs学习之路02/">nodejs学习之路02</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/03/2018-05-03-ES6学习之路05/">ES6学习之路05</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/02/2018-05-02-ES6学习之路04/">ES6学习之路04</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/01/2018-05-01-nodejs学习之路01/">nodejs学习之路01-异步调用与net fs核心类库</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/30/2018-04-30-docker学习笔记03/">docker学习笔记03-Dockerfile指令详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/29/2018-04-29-指数基金投资指南/">指数基金投资指南-银行螺丝钉</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/2018-04-28-docker学习笔记02/">docker学习笔记02-镜像</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/28/2018-04-28-docker学习笔记01/">docker学习笔记01-docker介绍与安装</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/26/2018-04-26-我的常用git命令/">我的常用git命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/25/2018-04-25-ES6学习之路03/">ES6学习之路-03</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/运动/" style="font-size: 15px;">运动</a> <a href="/tags/读书/" style="font-size: 15px;">读书</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/CICD/" style="font-size: 15px;">CICD</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/规划/" style="font-size: 15px;">规划</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://github.com/dumingcode" title="github" target="_blank">github</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">DuMing.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":["mshare","weixin","tsina","qzone","linkedin","fbook","twi","print","renren","sqq","evernotecn","bdysc","tqq","tqf","bdxc","kaixin001","tieba","douban","bdhome","thx","ibaidu","meilishuo","mogujie","diandian","huaban","duitang","hx","fx","youdao","sdo","qingbiji","people","xinhua","mail","isohu","yaolan","wealink","ty","iguba","h163","copy"],"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["tsina","qzone","weixin","fbook","twi","linkedin","youdao","evernotecn","mshare"]}};with(document)0[(getElementsByTagName('head')[0]||head).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script><script>(function(d, s) {
  var j, e = d.getElementsByTagName('body')[0];
  if (typeof LivereTower === 'function') { return; }
  j = d.createElement(s);
  j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
  j.async = true;
  e.appendChild(j);
})(document, 'script');
</script></body></html>