---
title: 微服务设计笔记12
tags: [微服务]
---
# 微服务设计笔记12
本篇笔记为微服务设计系列读书笔记的第十二篇，对之前写的11篇文章进行了总结。   
## 微服务的原则
![断路器视图](/images/wfwsj12_yz.png)<br/>
### 围绕业务概念建模
围绕业务的限界上下文定义的接口，比围绕技术概念定义的接口更加稳定。
### 接受自动化文化
微服务引入了复杂性，不得不管理大量的服务。解决问题的一个关键方法：拥抱自动化文化。前期花费一定的成本，构建支持微服务的工具是很有意义的。   
自动化测试必不可少，调用统一的命令行，以相同方式将系统部署到各个环境很有用，CICD是 对每次提交后的产品质量进行快速反馈的一个关键部分。   

### 隐藏内部实现细节
服务应当隐藏掉数据库，避免陷入数据库耦合。尽量选择与技术无关的API，这样就能自由选择使用不同的技术栈。请考虑使用REST，它将内部和外部的实现细节分离规范化。

### 去中心化
为了最大化微服务能带来的自治性，需要持续给拥有服务的团队委派决策和控制权。像企业服务总线和服务编配系统这样的方案，会导致业务逻辑的中心化和哑服务，应当避免使用。

### 可独立部署
使用RPC集成时，避免使用JAVA RMI提供的那种使用桩代码、紧密绑定客户端/服务器的技术。更改单个服务，然后把它部署到生产环境，无需联动地部署其他任何服务，这应该是常态。

### 隔离失败
微服务架构比单块架构更具有弹性，如果我们不考虑调用下游可能会失败的事实，系统会遭受灾难性级联故障。  
心中有反脆弱的信条，预期任何地方都会发生故障。正确设置超时、了解何时使用舱壁和断路器，来限制故障组件的连带影响。

### 高度可观察
需要从整体看待正在发生的事情，聚合日志和数据方便分析，关联标识可以帮助跟踪系统间的调用。

## 什么时候不用微服务
不了解一个单块系统领域的话，在划分服务前，第一件事情就是了解系统做什么，尝试识别出清晰的模块边界。
单块系统稳定后，再拆分。
微服务规模化后，面临的挑战会更加严峻。
构建微服务前，需要构建基础架构。


## 参考
《微服务设计》













































































































