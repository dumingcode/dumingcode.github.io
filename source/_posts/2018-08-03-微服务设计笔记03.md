---
title: 微服务设计笔记03
tags: [微服务]
---
# 微服务设计笔记03
本篇笔记为微服务设计系列读书笔记的第三篇，主要记录如何构建服务。  
## 好服务
### 松耦合
1. 能够独立修改及部署单个服务而不需要修改系统的其他部分。
2. 应该限制两个服务之间不同调用形式的数量，过度的通信会导致紧耦合。

### 高内聚
把相关行为聚集在一起，把不相关的放在别处。如果改变某个行为，最好能够在一个地方修改，然后尽可能快地发布。

## 限界上下文
一个由显式边界限定的特定职责。下图中的仓库和财务就是两个限界上下文。
![限界上下文图例](/images/context.png)<br/>


### 模块和服务
共享特定模型，而不应该共享内部表示。同一个进程内使用模块来减少彼此之间的耦合也是一种选择。一旦发现领域内部的限界上下文，一定要使用模块对其进行建模，同时使用共享和隐藏边界。    
这些模块边界就可以成为绝佳的微服务候选。微服务应该清晰的和限界上下文保持一致。   
熟练之后，可以省掉在单块系统中先使用模块这个步骤，而是直接使用单独的服务。但是对于新系统，还是建议先使用单块系统。  

### 过早划分
过早将一个系统划分成微服务的代价非常高，尤其面向新领域时。很多时候，将一个已有的代码库划分成微服务，要比从头开始构建微服务要简单。
## 业务功能
思考组织内的限界上下文时，不应该从共享数据的角度考虑，而应该从这些上下文能提供的功能来考虑。  
高层次的限界上下文可以使用嵌套的方法或者完全分离的方法。
![仓库限界服务图例](/images/cangku.png)<br/>


